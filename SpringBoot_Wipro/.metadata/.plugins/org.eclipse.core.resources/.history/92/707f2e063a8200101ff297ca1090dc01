package com.example.validation.controller;

import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

import com.example.validation.model.User;
import com.example.validation.service.UserService;

@RestController
public class UserController {

	
	//Autowired the service
	public UserService userService;
	
	@PostMapping("/add")
	public ResponseEntity saveUser(@RequestBody User u)
	{
		ResponseEntity responseEntity=null;
		User uobj=userService.saveUSer(u);
		if(uobj!=null)
			responseEntity= new ResponseEntity<>("Data nor Added",HttpStatus.OK);
		else
			responseEntity= new ResponseEntity<>("Data not Added",HttpStatus.INTERNAL_SERVER_ERROR);
			//return "Record not added";
		return responseEntity;
		
	}
	@GetMapping("/viewall")
	public ResponseEntity<Iterable<User>>getAllUsers()
	{
		Iterable<User> userlist=userService.getAllUser();
		return new ResponseEntity<>(userlist,HttpStatus.OK);
	}
}